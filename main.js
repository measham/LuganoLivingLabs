function initLenisSmoothScroll(){if("undefined"!=typeof Lenis&&"undefined"==typeof lenis)try{let e=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,wheelMultiplier:1,smoothTouch:!1,touchMultiplier:2,infinite:!1,autoResize:!0,autoRaf:!0});function t(i){e.raf(i),requestAnimationFrame(t)}window.lenis=e,requestAnimationFrame(t)}catch(i){}}function initLineAnimations(){gsap.utils.toArray(".list-line:not(.list-line--absolute), .underline").forEach(e=>{gsap.fromTo(e,{scaleX:0},{scaleX:1,duration:1,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none none"}})})}function initResponsiveMenu(){let e=document.querySelector("[data-menu-trigger]"),t=document.querySelector(".navbar"),i=document.querySelector(".menu__icon"),r=document.querySelector(".navbar__links");if(!e||!t||!i||!r)return;let n=!1,o=()=>{n=!n,t.classList.toggle("open",n),i.classList.toggle("open",n),e.setAttribute("aria-expanded",n),document.body.style.overflow=n?"hidden":"",r.style.pointerEvents=n?"auto":"none","undefined"!=typeof lenis&&(n?lenis.stop():lenis.start())},l=window.matchMedia("(max-width: 991px)");function a(){n||(r.style.pointerEvents="none",e.setAttribute("aria-expanded","false")),e.addEventListener("click",o)}l.addEventListener("change",l=>{l.matches?a():(e.removeEventListener("click",o),n&&(n=!1,t.classList.remove("open"),i.classList.remove("open"),document.body.style.overflow="",r.style.pointerEvents="",e.setAttribute("aria-expanded","false"),"undefined"!=typeof lenis&&lenis.start()))}),l.matches&&a()}function initMarqueeScrollDirection(){document.querySelectorAll("[data-marquee-scroll-direction-target]").forEach(e=>{let t=e.querySelector("[data-marquee-collection-target]"),i=e.querySelector("[data-marquee-scroll-target]");if(!t||!i)return;let{marqueeSpeed:r,marqueeDirection:n,marqueeDuplicate:o,marqueeScrollSpeed:l}=e.dataset,a=parseFloat(r),s="right"===n?1:-1,c=parseInt(o||0),d=parseFloat(l),u=window.innerWidth<479?.25:window.innerWidth<991?.5:1,h=a*(t.offsetWidth/window.innerWidth)*u;if(i.style.marginLeft=`${-1*d}%`,i.style.width=`${2*d+100}%`,c>0){let m=document.createDocumentFragment();for(let f=0;f<c;f++)m.appendChild(t.cloneNode(!0));i.appendChild(m)}let p=e.querySelectorAll("[data-marquee-collection-target]"),y=gsap.to(p,{xPercent:-100,repeat:-1,duration:h,ease:"linear"}).totalProgress(.5);gsap.set(p,{xPercent:1===s?100:-100}),y.timeScale(s),y.play(),e.setAttribute("data-marquee-status","normal"),ScrollTrigger.create({trigger:e,start:"top bottom",end:"bottom top",onUpdate(t){let i=1===t.direction;y.timeScale(i?-s:s),e.setAttribute("data-marquee-status",i?"normal":"inverted")}});let $=gsap.timeline({scrollTrigger:{trigger:e,start:"0% 100%",end:"100% 0%",scrub:0}}),g=-1===s?d:-d;$.fromTo(i,{x:`${g}vw`},{x:`${-g}vw`,ease:"none"})})}function initFooterYear(){let e=document.querySelectorAll("[data-footer-year]");e.forEach(e=>{e.textContent=new Date().getFullYear()})}function initNavbarIconRotation(){let e=document.querySelector(".navbar__icon");e&&gsap.to(e,{rotation:360,ease:"none",scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:!0,toggleActions:"play none none reverse"}})}gsap.registerPlugin(ScrollTrigger),"undefined"!=typeof SplitText?gsap.registerPlugin(SplitText):console.warn("SplitText plugin not loaded. Text split animations will not work.");class SVGRadialReveal{constructor(){if(this.footerSection=document.querySelector(".section.section--footer"),this.svgContainer=document.getElementById("svgContainer"),this.svg=this.svgContainer?.querySelector(".reveal-svg"),this.revealCircle=document.getElementById("revealCircle"),this.customCursor=document.getElementById("customCursor"),this.radialGradient=document.getElementById("revealMask"),this.mouse={x:0,y:0},this.smoothMouse={x:0,y:0},this.isHovering=!1,!this.footerSection||!this.svgContainer||!this.svg||!this.revealCircle||!this.radialGradient)return;this.init()}init(){this.setupEventListeners(),this.animate()}setupEventListeners(){document.addEventListener("mousemove",e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY,this.customCursor&&(this.customCursor.style.left=e.clientX-10+"px",this.customCursor.style.top=e.clientY-10+"px")}),this.footerSection&&(this.footerSection.addEventListener("mouseenter",()=>{this.isHovering=!0,this.customCursor&&(this.customCursor.style.transform="scale(1.5)")}),this.footerSection.addEventListener("mouseleave",()=>{this.isHovering=!1,this.customCursor&&(this.customCursor.style.transform="scale(1)")})),window.addEventListener("resize",()=>{this.updateMaskPosition()})}updateMaskPosition(){if(!this.isHovering||!this.svg||!this.radialGradient||!this.revealCircle)return;let e=this.svg.getBoundingClientRect(),t=(this.smoothMouse.x-e.left)/e.width,i=(this.smoothMouse.y-e.top)/e.height,r=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,i));this.radialGradient.setAttribute("cx",`${100*r}%`),this.radialGradient.setAttribute("cy",`${100*n}%`),this.radialGradient.setAttribute("r","55%"),this.revealCircle.setAttribute("cx",1182*r),this.revealCircle.setAttribute("cy",1034*n),this.revealCircle.setAttribute("r",320)}animate(){this.smoothMouse.x+=(this.mouse.x-this.smoothMouse.x)*.04,this.smoothMouse.y+=(this.mouse.y-this.smoothMouse.y)*.04,this.updateMaskPosition(),requestAnimationFrame(()=>this.animate())}}function initSVGRadialReveal(){try{let e=document.querySelector(".section.section--footer"),t=document.getElementById("svgContainer"),i=t?.querySelector(".reveal-svg"),r=document.getElementById("revealCircle"),n=document.getElementById("revealMask");if(!e||!t||!i||!r||!n)return;let o=navigator.userAgent;if(o.includes("Safari")&&!o.includes("Chrome")&&!o.includes("Chromium"))return;new SVGRadialReveal}catch(l){}}function initTextSplitReveal(){if("undefined"==typeof gsap||"undefined"==typeof SplitText||"undefined"==typeof ScrollTrigger)return;let e=document.querySelectorAll('[data-split="heading"], .rich-text__list.rich-text__list--columns-2.w-richtext li, .rich-text__list.rich-text__list--columns.w-richtext li, .rich-text__eventi-intro.w-richtext li');if(!e.length)return;e.forEach(e=>gsap.set(e,{autoAlpha:1}));let t={lines:{duration:1,stagger:.08},words:{duration:.6,stagger:.06},chars:{duration:.4,stagger:.01}};e.forEach(e=>{try{let i=e.dataset.splitReveal||"lines";SplitText.create(e,{type:("lines"===i?["lines"]:"words"===i?["lines","words"]:["lines","words","chars"]).join(", "),mask:"lines",autoSplit:!0,reduceWhiteSpace:!1,linesClass:"line",wordsClass:"word",charsClass:"letter",onSplit(r){let n=r[i];if(!n?.length)return;let o=t[i];return gsap.from(n,{yPercent:110,duration:o.duration,stagger:o.stagger,ease:"expo.out",scrollTrigger:{trigger:e,start:"clamp(top 80%)",once:!0}})}})}catch(r){}})}function initHeroImageScale(){let e=document.querySelector(".section--hero-img"),t=e?.querySelector(".hero__img");e&&t&&(gsap.set(t,{scale:1.1,transformOrigin:"center center"}),gsap.to(t,{scale:1,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:"bottom top",scrub:!0}}))}function initHomeStatsAnimation(){let e=document.querySelector(".stats__content"),t=document.querySelectorAll(".stats__item");e&&0!==t.length&&(t.forEach(e=>e.classList.remove("animated")),ScrollTrigger.create({trigger:e,start:"top 90%",onEnter(){t.forEach((e,t)=>{gsap.delayedCall(.2*t,()=>{e.classList.add("animated")})})},once:!0}))}function initAboutPrinciples(){document.querySelectorAll(".principles__item").forEach(e=>{e.classList.remove("active")}),gsap.utils.toArray(".principles__item").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",toggleClass:{targets:e,className:"active"},once:!0})})}function initHomeTextMaskAnimation(){document.querySelectorAll(".title__item").forEach(e=>{e.classList.remove("active")}),gsap.utils.toArray(".title__item").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",toggleClass:{targets:e,className:"active"},once:!0})})}function initHomeTextScroll(){document.querySelectorAll(".title__item").forEach(e=>{e.classList.remove("active")}),gsap.utils.toArray(".title__item").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",toggleClass:{targets:e,className:"active"},once:!0})});let e=document.querySelector(".stats__content"),t=document.querySelectorAll(".stats__item");e&&t.length&&(t.forEach(e=>e.classList.remove("animated")),ScrollTrigger.create({trigger:e,start:"top 90%",onEnter(){t.forEach((e,t)=>{gsap.delayedCall(.2*t,()=>{e.classList.add("animated")})})},once:!0}))}function initHomePreloader(){function e(){var e=document.createElement("script");e.src="https://cdn.cookie-script.com/s/c0d642f420867d7d7aa706e89df6632f.js",e.async=!0,e.defer=!0,document.head.appendChild(e)}if(sessionStorage.getItem("preloaderInitialized")?e():setTimeout(e,6e3),sessionStorage.getItem("preloaderInitialized")){let t=document.querySelector(".preloader");t&&gsap.set(t,{opacity:0,visibility:"hidden"}),gsap.delayedCall(1.5,function(){let e=new KeyboardEvent("keydown",{key:"a",code:"KeyA",keyCode:65,which:65,bubbles:!0,cancelable:!0});document.dispatchEvent(e)});return}sessionStorage.setItem("preloaderInitialized","true"),window.lenis&&window.lenis.stop();let i=document.querySelector(".counter-3");if(!i){window.lenis&&window.lenis.start();return}for(let r=0;r<2;r++)for(let n=0;n<10;n++){let o=document.createElement("div");o.className="num",o.textContent=n,i.appendChild(o)}let l=document.createElement("div");function a(e,t,i=0){let r=e.querySelector(".num").clientHeight,n=(e.querySelectorAll(".num").length-1)*r;gsap.to(e,{y:-n,duration:t,delay:i,ease:"power2.inOut"})}l.className="num",l.textContent="0",i.appendChild(l),a(i,3),a(document.querySelector(".counter-2"),4),a(document.querySelector(".counter-1"),1.5,2.5);let s=document.querySelectorAll("[data-target='preload-eyebrow']");if(s.length>=3){let c=window.innerWidth<=768;c?gsap.set(s,{x:"0%"}):(gsap.set(s[0],{x:"400%"}),gsap.set(s[1],{x:"0%"}),gsap.set(s[2],{x:"-400%"})),gsap.to("[data-target='preload-eyebrow']",{y:"0%",stagger:{amount:.4},duration:.6,delay:2.5,ease:"power2.inOut"})}gsap.delayedCall(4,function(){let e=document.querySelector(".preloader-title"),t=document.querySelector("[data-target='flip']");Flip.fit(e,t,{duration:1,ease:"power2.inOut",absolute:!0})});let d=document.querySelector(".preloader__btm");d&&gsap.to(d,{y:"20vh",duration:1,delay:4,ease:"power2.inOut"}),s.length>=3&&gsap.to("[data-target='preload-eyebrow']",{x:"0%",duration:.6,delay:4.5,ease:"power2.inOut"}),gsap.to(".digit",{top:"-3em",stagger:{amount:.2},delay:4,duration:.8,ease:"power4.inOut"});let u=document.querySelector(".preloader");u&&gsap.to(u,{opacity:0,duration:.3,delay:5.1,ease:"power1.inOut",onStart:function(){let e=new KeyboardEvent("keydown",{key:"a",code:"KeyA",keyCode:65,which:65,bubbles:!0,cancelable:!0});document.dispatchEvent(e)},onComplete:function(){gsap.set(u,{visibility:"hidden"}),window.lenis&&window.lenis.start()}})}function initFilterPage(){let e=document.querySelectorAll("[data-stato-target]"),t=document.querySelectorAll("[data-sostenitori-target]"),i=document.querySelectorAll(".item-list__item.w-dyn-item"),r=document.getElementById("section-filter"),n=document.querySelector(".filter__reset"),o=document.querySelector(".item-list__empty"),l=document.querySelector(".item-list__empty-btn"),a=document.querySelector("#toggleDefault"),s=document.querySelectorAll(".filter__dropdown"),c=document.getElementById("tagSearch"),d=document.querySelector(".filter__tags");if(0===i.length)return;let u={stato:new Set(["all"]),sostenitori:new Set(["all"])},h=[],m=!1,f=new Set;i.forEach(e=>{let t=e.querySelectorAll("[data-filter-tags]");t.forEach(e=>{let t=e.textContent||"";t.split(/\s+/).forEach(e=>{let t=e.replace(/^#/,"").toLowerCase().trim();t&&f.add(t)})})});let p=new Set,y=new Set;i.forEach(e=>{e.querySelectorAll("[data-sostenitori-item]").forEach(e=>{p.add(e.getAttribute("data-sostenitori-item"))});let t=e.getAttribute("data-stato-item");t&&y.add(t)}),t.forEach(e=>{let t=e.getAttribute("data-sostenitori-target"),i=e.closest(".filter__dropdown-item");!p.has(t)&&i&&(i.style.display="none")}),e.forEach(e=>{let t=e.getAttribute("data-stato-target"),i=e.closest(".filter__dropdown-item");!y.has(t)&&i&&(i.style.display="none")}),i.forEach(e=>{e.setAttribute("data-filter-status","active"),e.setAttribute("aria-hidden","false")}),n&&n.classList.add("filter--hide");let $=(e,t)=>{e.setAttribute("data-filter-status",t?"active":"not-active"),e.setAttribute("aria-hidden",t?"false":"true")},g=e=>{let t=document.querySelector(`.filter__dropdown[data-filter-type="${e}"]`);if(!t)return;let i=t.querySelector("[data-filter-amount]");if(!i)return;let r=u[e].has("all")?0:u[e].size;r>0?(i.textContent=`(${r})`,gsap.to(i,{opacity:1,duration:.3,ease:"power2.out"})):gsap.to(i,{opacity:0,duration:.3,ease:"power2.out"});let o=!u.stato.has("all")||!u.sostenitori.has("all")||h.length>0;n&&(o?n.classList.remove("filter--hide"):n.classList.add("filter--hide"))},v=()=>{let e=!u.stato.has("all")||!u.sostenitori.has("all")||h.length>0;n&&(e?n.classList.remove("filter--hide"):n.classList.add("filter--hide"))},S=()=>{let e=document.querySelectorAll('.item-list__item[data-filter-status="active"]').length;0===e?o&&"none"===o.style.display&&(o.style.display="block",gsap.fromTo(o,{opacity:0},{opacity:1,duration:.3,ease:"power2.out"})):o&&"none"!==o.style.display&&(o.style.display="none",o.style.opacity="0")},w=()=>{r&&"undefined"!=typeof lenis&&lenis.scrollTo("#section-filter",{offset:-100,duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e))})},b=()=>{if(w(),!m){if(m=!0,s.forEach(e=>{if(e.classList.contains("is-open")){let t=e.querySelector(".filter__dropdown-list"),i=e.querySelector(".filter__dropdown-svg");gsap.timeline().to(t,{height:0,opacity:0,duration:.3,ease:"power2.inOut"}).set(t,{display:"none"}).to(i,{rotation:0,duration:.3,ease:"power2.inOut"}),e.classList.remove("is-open"),e.isOpen=!1}}),[...e,...t].forEach(e=>e.checked=!1),a&&(a.checked=!1),u.stato=new Set(["all"]),u.sostenitori=new Set(["all"]),h=[],d&&(d.innerHTML=""),c){c.value="";let r=c.parentElement?.querySelector(".suggestion");r&&(r.textContent="")}g("stato"),g("sostenitori"),i.forEach(e=>{"active"===e.getAttribute("data-filter-status")&&e.setAttribute("data-filter-status","transition-out"),e.timeoutId=setTimeout(()=>{$(e,!0),e.timeoutId=null},300)}),setTimeout(()=>{m=!1,S()},350)}};function E(){m||(m=!0,i.forEach(e=>{e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null)}),w(),i.forEach(e=>{let t=e.querySelector("a[data-sostenitori-item]"),i=t?.getAttribute("data-sostenitori-item"),r=e.getAttribute("data-stato-item"),n=Array.from(e.querySelectorAll("[data-sostenitori-item]")).map(e=>e.getAttribute("data-sostenitori-item")),o=u.stato.has("all")||u.stato.has(r),l=u.sostenitori.has("all")||n.some(e=>u.sostenitori.has(e)),s=!a?.checked||"Yes"===i||"main-event"===i,c=e.querySelector("[data-filter-tags]"),d=0===h.length||c&&h.every(e=>{let t=c.textContent||"",i=t.split(/\s+/).map(e=>e.replace(/^#/,"").toLowerCase());return i.includes(e)}),m=o&&l&&s&&d,f=e.getAttribute("data-filter-status");"active"===f&&e.setAttribute("data-filter-status","transition-out"),e.timeoutId=setTimeout(()=>{$(e,m),e.timeoutId=null},300)}),setTimeout(()=>{m=!1,S()},350))}if(n&&n.addEventListener("click",e=>{e.preventDefault(),b()}),l&&l.addEventListener("click",e=>{e.preventDefault(),b()}),a&&a.addEventListener("change",()=>{if(w(),m)return;m=!0;let e=a.checked;i.forEach(t=>{let i=t.querySelector("a[data-sostenitori-item]"),r=i?.getAttribute("data-sostenitori-item"),n=t.getAttribute("data-stato-item"),o=Array.from(t.querySelectorAll("[data-sostenitori-item]")).map(e=>e.getAttribute("data-sostenitori-item")),l=u.stato.has("all")||u.stato.has(n),a=u.sostenitori.has("all")||o.some(e=>u.sostenitori.has(e)),s=l&&a&&(!e||"Yes"===r||"main-event"===r),c=t.getAttribute("data-filter-status");"active"===c&&t.setAttribute("data-filter-status","transition-out"),t.timeoutId=setTimeout(()=>{$(t,s),t.timeoutId=null},300)}),setTimeout(()=>{m=!1,S()},350)}),[...e,...t].forEach(e=>{e.addEventListener("change",()=>{var t,r,n;if(w(),m)return;m=!0;let o=e.hasAttribute("data-stato-target")?"stato":"sostenitori",l=e.getAttribute(`data-${o}-target`);t=o,r=l,n=e.checked,i.forEach(e=>{e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null)}),n?(u[t].has("all")&&u[t].clear(),u[t].add(r)):(u[t].delete(r),0===u[t].size&&u[t].add("all")),g(t),w(),i.forEach(e=>{let t=e.querySelector("a[data-sostenitori-item]"),i=t?.getAttribute("data-sostenitori-item"),r=e.getAttribute("data-stato-item"),n=Array.from(e.querySelectorAll("[data-sostenitori-item]")).map(e=>e.getAttribute("data-sostenitori-item")),o=u.stato.has("all")||u.stato.has(r),l=u.sostenitori.has("all")||n.some(e=>u.sostenitori.has(e)),s=!a?.checked||"Yes"===i||"main-event"===i,c=e.querySelector("[data-filter-tags]"),d=0===h.length||c&&h.every(e=>{let t=c.textContent||"",i=t.split(/\s+/).map(e=>e.replace(/^#/,"").toLowerCase());return i.includes(e)}),m=o&&l&&s&&d,f=e.getAttribute("data-filter-status");"active"===f&&e.setAttribute("data-filter-status","transition-out"),e.timeoutId=setTimeout(()=>{$(e,m),e.timeoutId=null},300)}),setTimeout(()=>{m=!1,S()},350)})}),s.forEach(e=>{let t=e.querySelector(".filter__dropdown-toggle"),i=e.querySelector(".filter__dropdown-list"),r=e.querySelector(".filter__dropdown-svg"),n=e.querySelectorAll(".filter__dropdown-item");e.isOpen=!1,gsap.set(i,{opacity:0,height:0,overflow:"hidden"}),gsap.set(r,{rotation:0}),n.forEach(e=>{e.addEventListener("mouseenter",()=>{gsap.to(n,{opacity:.5,duration:.3,ease:"power2.out"}),gsap.to(e,{opacity:1,duration:.3,ease:"power2.out",overwrite:!0})}),e.addEventListener("mouseleave",()=>{gsap.to(n,{opacity:1,duration:.3,ease:"power2.out"})})});let o=()=>{gsap.set(i,{display:"block",opacity:0});let t=i.scrollHeight;e.classList.add("is-open"),gsap.timeline().set(i,{display:"block"}).to(i,{height:t,opacity:1,duration:.4,ease:"power3.out"}).to(r,{rotation:180,duration:.4,ease:"power3.out"},"<"),e.isOpen=!0},l=()=>{e.classList.remove("is-open"),gsap.timeline().to(i,{height:0,opacity:0,duration:.3,ease:"power2.inOut"}).set(i,{display:"none"}).to(r,{rotation:0,duration:.3,ease:"power2.inOut"},"<"),e.isOpen=!1};t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),s.forEach(t=>{if(t!==e&&t.isOpen){let i=t.querySelector(".filter__dropdown-list"),r=t.querySelector(".filter__dropdown-svg");t.classList.remove("is-open"),gsap.timeline().to(i,{height:0,opacity:0,duration:.3,ease:"power2.inOut"}).set(i,{display:"none"}).to(r,{rotation:0,duration:.3,ease:"power2.inOut"},"<"),t.isOpen=!1}}),e.isOpen?l():o()})}),c&&d){let A=c.parentElement?.querySelector(".suggestion");if(!A){console.warn("Suggestion div not found. Make sure you have the proper HTML structure with .search-wrapper and .suggestion");return}c.addEventListener("input",e=>{let t=c.value,i=t.toLowerCase();if(t!==i){let r=c.selectionStart;c.value=i,c.setSelectionRange(r,r)}let n=i,o=n.replace(/^#/,"").toLowerCase();if(console.log("Input event - raw:",n,"query:",o,"available tags:",Array.from(f)),!o){A.textContent="";return}let l=Array.from(f).filter(e=>e.startsWith(o));if(console.log("Matches for query:",o,":",l),!l.length){A.textContent="";return}let a=l.sort((e,t)=>e.length-t.length)[0];console.log("Best match:",a),A.textContent=a}),c.addEventListener("keydown",e=>{("Tab"===e.key||"ArrowRight"===e.key)&&A.textContent&&(e.preventDefault(),c.value=A.textContent,A.textContent="")}),c.addEventListener("keydown",e=>{if("Enter"===e.key){e.preventDefault();let t;A.textContent?(t=A.textContent.trim().toLowerCase(),console.log("Enter pressed - using autocomplete suggestion:",t)):(t=c.value.trim().replace(/^#/,"").toLowerCase(),console.log("Enter pressed - using typed text:",t)),t&&(function e(t){if(t=t.toLowerCase().trim(),console.log("Adding tag:",t,"Available tags:",Array.from(f),"Tag exists:",f.has(t)),!f.has(t)){console.warn("Tag not found in available tags:",t);return}if(h.includes(t)){console.log("Tag already selected:",t);return}h.push(t),console.log("Tag added successfully:",t,"Selected tags:",h),function e(){d&&(d.innerHTML="",h.forEach(t=>{let i=document.createElement("div");i.className="pill",i.textContent=t;let r=document.createElement("span");r.className="remove",r.textContent="\xd7",r.onclick=()=>{h=h.filter(e=>e!==t),e(),v(),E()},i.appendChild(r),d.appendChild(i)}))}(),v(),E()}(t),E()),c.value="",A.textContent=""}}),c.addEventListener("blur",()=>{setTimeout(()=>{A.textContent=""},100)})}}function initEventiModal(){function e(){let e=document.querySelector(".eventi__modal"),t=e.querySelectorAll(".modal__list-item");e.classList.remove("active"),"undefined"!=typeof lenis&&lenis.start(),t.forEach(e=>e.classList.remove("active-item"))}document.querySelectorAll(".item-list__item[data-item]").forEach(e=>{e.addEventListener("click",()=>{!function e(t){let i=document.querySelector(".eventi__modal"),r=i.querySelectorAll(".modal__list-item");i.classList.add("active"),"undefined"!=typeof lenis&&lenis.stop(),r.forEach(e=>{e.classList.toggle("active-item",e.getAttribute("data-eventi-modal")===t)})}(e.getAttribute("data-item"))})}),document.querySelectorAll("[data-modal-close]").forEach(t=>t.addEventListener("click",e))}function initEventiDateFilter(){let e=document.querySelector(".filter__list-items"),t=document.querySelector("[data-filter-list]"),i=Array.from(document.querySelectorAll(".item-list__item[data-filter-item]"));if(!e||!t||0===i.length)return;t.style.display="flex",e.querySelectorAll(".filter__eventi-list-item").forEach(e=>e.remove());let r=Array.from(new Set(i.map(e=>e.dataset.filterItem))).sort((e,t)=>{let i=e=>e.split(".").reverse().join("-");return new Date(i(e))-new Date(i(t))});r.forEach(t=>e.appendChild(function e(t){let i=document.querySelector(".filter__eventi-list-item:not([data-filter-radio])");if(i){let r=i.cloneNode(!0);r.dataset.filterRadio=t;let n=r.querySelector(".filter__eventi-list-text");return n&&(n.textContent=t),r.classList.remove("active"),r}{let o=document.querySelector(".filter__list > svg.filter__eventi-list-icon"),l=document.createElement("div");l.className="filter__eventi-list-item",l.dataset.filterRadio=t;let a=document.createElement("div");if(a.className="filter__eventi-list-icon",o){let s=o.cloneNode(!0);a.appendChild(s)}else{let c=document.createElement("svg");c.setAttribute("width","12"),c.setAttribute("height","11"),c.setAttribute("viewBox","0 0 12 11"),c.setAttribute("fill","none"),c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.style.cssText="width: 12px; height: 11px; display: block;",c.innerHTML='<path d="M1.33398 5.38737H10.6673M10.6673 5.38737L6.00065 0.720703M10.6673 5.38737L6.00065 10.054" stroke="currentColor" stroke-linecap="square"/>',a.appendChild(c)}let d=document.createElement("div");return d.className="filter__eventi-list-text",d.textContent=t,l.appendChild(a),l.appendChild(d),l}}(t)));let n=Array.from(e.querySelectorAll("[data-filter-radio]"));function o(e){let[t,i,r]=e.dataset.filterItem.split(".").map(Number),[n]=e.dataset.filterTime.split("-"),[o,l]=n.split(":").map(Number);return new Date(r,i-1,t,o,l).getTime()}function l(){let e=Array.from(t.children).sort((e,t)=>o(e)-o(t));e.forEach(e=>t.appendChild(e))}function a(e){i.forEach(t=>{let i=0===e.length||e.includes(t.dataset.filterItem),r=t.getAttribute("data-filter-status");"active"===r&&t.setAttribute("data-filter-status","transition-out"),t.timeoutId=setTimeout(()=>{var e,r;e=t,r=i,e.setAttribute("data-filter-status",r?"active":"not-active"),e.setAttribute("aria-hidden",r?"false":"true"),t.timeoutId=null},300)}),setTimeout(l,300)}l();let s=[];if(n.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.filterRadio,i=e.classList.contains("active");i?(s=s.filter(e=>e!==t),e.classList.remove("active")):(s.push(t),e.classList.add("active")),a(s)})}),1===r.length){let c=n[0];c&&(c.classList.add("active"),a(s=[r[0]]))}else a(s)}function initDetailsStatsAnimation(){let e=document.querySelectorAll(".cms-stats__rich-text");0!==e.length&&(e.forEach(e=>e.classList.remove("animated")),e.forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",toggleClass:{targets:e,className:"animated"},once:!0})}))}function initDetailsTimelineAnimation(){let e=document.querySelectorAll(".timeline");0!==e.length&&gsap.utils.toArray(".timeline").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",toggleClass:{targets:e,className:"active"},once:!0})})}function initDetailsLinkIconInjection(){let e=document.querySelector(".rich-text__list-link-icon");if(!e)return;let t=e.innerHTML;e.style.display="none",document.querySelectorAll(".rich-text__list--links li").forEach(e=>{if(e.classList.add("rich-text__list--link-item"),!e.querySelector(".rich-text__list-link-icon")){let i=document.createElement("div");i.className="rich-text__list-link-icon",i.innerHTML=t,e.append(i)}})}function initDetailsLineInjection(){let e=document.querySelector(".rich-text__list-line");if(!e)return;let t=e.innerHTML;e.style.display="none",[".rich-text__list--lines",".rich-text__list--links",".rich-text__list--accordion"].forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.querySelectorAll(":scope > ul > li").forEach(e=>{if(!e.querySelector(":scope > .rich-text__list-line")){let i=document.createElement("div");i.className="rich-text__list-line",i.innerHTML=t,e.append(i)}})})})}function initDetailsLineAnimations(){let e=document.querySelectorAll(".rich-text__list-line .list-line:not(.list-line--absolute)");0!==e.length&&gsap.utils.toArray(".rich-text__list-line .list-line:not(.list-line--absolute)").forEach(e=>{gsap.fromTo(e,{scaleX:0,transformOrigin:"left"},{scaleX:1,duration:1,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none none"}})})}function initDetailsAccordion(){let e=document.querySelector(".rich-text__accordion-icon");if(!e)return;let t=e.innerHTML;e.style.display="none",document.querySelectorAll(".rich-text__list--accordion > ul > li").forEach((e,i)=>{let r=e.querySelector(":scope > ul");if(!r)return;let n=document.createElement("div");n.className="rich-text__accordion-icon",n.innerHTML=t,e.insertBefore(n,r);let o=`accordion-panel-${i}`;e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),e.id=o,r.setAttribute("role","region"),r.setAttribute("aria-labelledby",o),r.setAttribute("aria-hidden","true"),r.style.maxHeight="0",r.style.overflow="hidden",r.style.transition="max-height 0.4s ease, opacity 0.4s ease",r.style.opacity="0",e.style.cursor="pointer",e.addEventListener("click",t=>{if(r.contains(t.target))return;let i="true"===e.getAttribute("aria-expanded");document.querySelectorAll(".rich-text__list--accordion > ul > li").forEach(t=>{if(t===e)return;t.setAttribute("aria-expanded","false");let i=t.querySelector(":scope > ul");i.setAttribute("aria-hidden","true"),i.style.maxHeight="0",i.style.opacity="0",t.querySelector(".rich-text__accordion-icon").classList.remove("open")}),i?(e.setAttribute("aria-expanded","false"),r.setAttribute("aria-hidden","true"),r.style.maxHeight="0",r.style.opacity="0",n.classList.remove("open")):(e.setAttribute("aria-expanded","true"),r.setAttribute("aria-hidden","false"),r.style.maxHeight=r.scrollHeight+"px",r.style.opacity="1",n.classList.add("open"))})})}function initDetailsDownloadCards(){let e=document.querySelector(".rich-text__download-icon"),t=e?e.innerHTML:"";e&&(e.style.display="none"),document.querySelectorAll(".rich-text__list--download > ul > li").forEach(e=>{e.style.position="relative";let i=e.querySelector("a");if(i&&!i.classList.contains("download__content")&&i.classList.add("download__content"),!e.querySelector(".download__bg")){let r=document.createElement("div");r.className="download__bg",e.insertBefore(r,e.firstChild)}if(t&&!e.querySelector(".rich-text__download-icon")){let n=document.createElement("div");n.className="rich-text__download-icon",n.innerHTML=t,e.append(n)}})}function initDetailsYouTubeThumbnails(){let e=document.querySelectorAll(".youtube");0!==e.length&&e.forEach(e=>{let t=e.dataset.embed;if(!t)return;let i;try{let r=new URL(t);i=r.searchParams.get("v")}catch(n){return}if(!i||e.querySelector("img")||e.querySelector("iframe"))return;let o=new Image;o.src=`https://img.youtube.com/vi/${i}/sddefault.jpg`,o.loading="eager",o.alt="YouTube video thumbnail",e.appendChild(o),o.addEventListener("error",()=>{o.src="https://via.placeholder.com/480x360?text=Video+Unavailable"}),e.addEventListener("click",()=>{let t=document.createElement("iframe");t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",""),t.src=`https://www.youtube.com/embed/${i}?rel=0&showinfo=0&autoplay=1`,e.innerHTML="",e.appendChild(t)})})}function initDetailsHeroScroll(){let e=document.querySelector(".section--hero-img");if(!e)return;let t=e.querySelector(".hero__img");t&&(gsap.set(t,{scale:1.1,transformOrigin:"center center"}),gsap.to(t,{scale:1,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:"bottom top",scrub:!0}}))}function initDetailSliders(){if("undefined"==typeof Swiper)return;var e=null;let t=document.getElementById("slider-team");t&&t.querySelector(".swiper-slide")&&(e=new Swiper("#slider-team",{slidesPerView:"auto",spaceBetween:24,freeMode:{enabled:!0,sticky:!0,momentum:!0,momentumRatio:.8,momentumVelocityRatio:.6,momentumBounce:!1,minimumVelocity:.05,minimumTouchDelta:20},resistance:!0,resistanceRatio:.7,touchRatio:.3,touchAngle:45,grabCursor:!0,speed:500,watchSlidesProgress:!0,watchSlidesVisibility:!0,on:{init:function(){c(this)},slideChange:function(){c(this)},reachEnd:function(){c(this)},reachBeginning:function(){c(this)},slideChangeTransitionEnd:function(){c(this)},touchEnd:function(){let e=this.wrapperEl;e.style.transition="transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)",setTimeout(()=>{e.style.transition=""},600),setTimeout(()=>{c(this)},100)},touchStart:function(){this.wrapperEl.style.transition=""},transitionEnd:function(){c(this)}}}));var i=null;function r(){if(window.innerWidth<=991)return;let e=document.getElementById("slider-gallery");e&&e.querySelector(".swiper-slide")&&!i&&(i=new Swiper("#slider-gallery",{slidesPerView:"auto",spaceBetween:window.innerWidth<=991?0:24,freeMode:{enabled:!0,sticky:!0,momentum:!0,momentumRatio:.8,momentumVelocityRatio:.6,momentumBounce:!1,minimumVelocity:.05,minimumTouchDelta:20},resistance:!0,resistanceRatio:.7,touchRatio:.3,touchAngle:45,grabCursor:!0,speed:500,watchSlidesProgress:!0,watchSlidesVisibility:!0,on:{init:function(){window.innerWidth>991&&function e(t){if(!t||!t.wrapperEl)return;let i=document.querySelectorAll(".gallery__video:not(.w-dyn-bind-empty):not(.w-condition-invisible)");i.length&&(i.forEach(e=>{if(!e)return;let i=document.createElement("div");i.className="swiper-slide",i.appendChild(e),t.wrapperEl.appendChild(i)}),t.update(),t.updateSlides(),t.updateProgress(),t.updateSlidesOffset())}(this),c(this)},slideChange:function(){c(this)},reachEnd:function(){c(this)},reachBeginning:function(){c(this)},slideChangeTransitionEnd:function(){c(this)},touchEnd:function(){let e=this.wrapperEl;e.style.transition="transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)",setTimeout(()=>{e.style.transition=""},600),setTimeout(()=>{c(this)},100)},touchStart:function(){this.wrapperEl.style.transition=""},transitionEnd:function(){c(this)}}}))}var n=null;if(window.innerWidth>991){let o=document.getElementById("slider-panels");o&&o.querySelector(".swiper-slide")&&(n=new Swiper("#slider-panels",{slidesPerView:"auto",spaceBetween:window.innerWidth<=991?0:24,freeMode:{enabled:!0,sticky:!0,momentum:!0,momentumRatio:.8,momentumVelocityRatio:.6,momentumBounce:!1,minimumVelocity:.05,minimumTouchDelta:20},resistance:!0,resistanceRatio:.7,touchRatio:.3,touchAngle:45,grabCursor:!0,speed:500,watchSlidesProgress:!0,watchSlidesVisibility:!0,on:{init:function(){window.innerWidth>991&&function e(t){if(!t||!t.wrapperEl)return;let i=document.querySelectorAll(".panel__video:not(.w-dyn-bind-empty):not(.w-condition-invisible)");i.length&&(i.forEach(e=>{if(!e)return;let i=document.createElement("div");i.className="swiper-slide",i.appendChild(e),t.wrapperEl.appendChild(i)}),t.update(),t.updateSlides(),t.updateProgress(),t.updateSlidesOffset())}(this),c(this),s(this)},slideChange:function(){c(this),s(this)},reachEnd:function(){c(this)},reachBeginning:function(){c(this)},slideChangeTransitionEnd:function(){c(this)},touchEnd:function(){let e=this.wrapperEl;e.style.transition="transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)",setTimeout(()=>{e.style.transition=""},600),setTimeout(()=>{c(this)},100)},touchStart:function(){this.wrapperEl.style.transition=""},transitionEnd:function(){c(this)}}}))}var l=null;let a=document.getElementById("slider-featured");function s(e){if(!e)return;let t=e.el.id;if("slider-featured"!==t&&"slider-panels"!==t)return;let i=e.slides;i.forEach((e,t)=>{let i=e.querySelector(".image-title");if(i){let r,n=e.getAttribute("data-swiper-slide-index");r=null!==n?parseInt(n,10)+1:t+1,i.textContent=r}})}function c(e){if(!e)return;let t=e.el.id,i=document.querySelector(`[data-slider="${t}"].slider__arrow--prev`),r=document.querySelector(`[data-slider="${t}"].slider__arrow--next`);if(i&&r){if(e.params.loop){i.classList.remove("slider__arrow--hidden"),r.classList.remove("slider__arrow--hidden");return}e.isBeginning?i.classList.add("slider__arrow--hidden"):i.classList.remove("slider__arrow--hidden"),e.isEnd?r.classList.add("slider__arrow--hidden"):r.classList.remove("slider__arrow--hidden")}}a&&a.querySelector(".swiper-slide")&&(l=new Swiper("#slider-featured",{slidesPerView:"auto",spaceBetween:0,loop:!0,freeMode:{enabled:!0,sticky:!0,momentum:!0,momentumRatio:.8,momentumVelocityRatio:.6,momentumBounce:!1,minimumVelocity:.05,minimumTouchDelta:20},resistance:!0,resistanceRatio:.7,touchRatio:.3,touchAngle:45,grabCursor:!0,speed:500,watchSlidesProgress:!0,watchSlidesVisibility:!0,on:{init:function(){c(this),s(this)},slideChange:function(){c(this),s(this)},reachEnd:function(){c(this)},reachBeginning:function(){c(this)},slideChangeTransitionEnd:function(){c(this)},touchEnd:function(){let e=this.wrapperEl;e.style.transition="transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)",setTimeout(()=>{e.style.transition=""},600),setTimeout(()=>{c(this)},100)},touchStart:function(){this.wrapperEl.style.transition=""},transitionEnd:function(){c(this)}}})),r(),window.addEventListener("resize",function(){r()}),document.addEventListener("DOMContentLoaded",function(){let t=document.querySelector('[data-slider="slider-team"].slider__arrow--prev'),r=document.querySelector('[data-slider="slider-team"].slider__arrow--next');t&&t.addEventListener("click",function(){e&&e.slidePrev()}),r&&r.addEventListener("click",function(){e&&e.slideNext()});let o=document.querySelector('[data-slider="slider-gallery"].slider__arrow--prev'),a=document.querySelector('[data-slider="slider-gallery"].slider__arrow--next');o&&o.addEventListener("click",function(){i&&i.slidePrev()}),a&&a.addEventListener("click",function(){i&&i.slideNext()});let s=document.querySelector('[data-slider="slider-panels"].slider__arrow--prev'),c=document.querySelector('[data-slider="slider-panels"].slider__arrow--next');s&&s.addEventListener("click",function(){n&&n.slidePrev()}),c&&c.addEventListener("click",function(){n&&n.slideNext()});let d=document.querySelector('[data-slider="slider-featured"].slider__arrow--prev'),u=document.querySelector('[data-slider="slider-featured"].slider__arrow--next');d&&d.addEventListener("click",function(){l&&l.slidePrev()}),u&&u.addEventListener("click",function(){l&&l.slideNext()})}),1}function initColorBlockReveal(){document.querySelectorAll("[data-color-reveal]").forEach(e=>{let t=e.querySelector("[data-color-grid]"),i=[];if(!t)return;let r="#000000";if(e.dataset.blockColor)r=e.dataset.blockColor;else if(document.body){let n=document.body.getAttribute("data-colour");if(n){let o=getComputedStyle(document.body),l=o.getPropertyValue("--theme-colour");l&&""!==l.trim()&&(r=l.trim())}}for(let a=0;a<8;a++)for(let s=0;s<8;s++){let c=document.createElement("div"),d=12.5*s,u=12.5*a,h=7===a,m=7===s;Object.assign(c.style,{position:"absolute",width:m?"calc(12.5% + 1px)":"12.5%",height:h?"calc(12.5% + 1px)":"12.5%",top:`${u}%`,left:`${d}%`,backgroundColor:r,opacity:"1",pointerEvents:"none",margin:"0",padding:"0",border:"none",outline:"none"}),t.appendChild(c),i.push(c)}ScrollTrigger.create({trigger:e,start:"top 70%",once:!0,onEnter(){gsap.to(i,{opacity:0,duration:0,stagger:{each:.8/i.length,from:"random"},onComplete(){t.remove()}})}})})}function initLocaleDropdownHide(){let e=document.querySelector('.locale__dropdown .locale__list-link.w--current, .locale__dropdown [aria-current="page"]');if(!e)return;let t=e.closest(".locale__list-item");t?t.style.display="none":e.style.display="none"}function initPageTransitions(){let e=document.querySelector(".page-transition"),t=document.querySelector(".hero--bg"),i=document.querySelector(".hero__img"),r=gsap.timeline({defaults:{ease:"power2.out"}});e&&r.to(e,{autoAlpha:0,duration:.5},0),t&&(gsap.set(t,{height:"100vh"}),r.to(t,{height:"100%",duration:1,ease:"power2.out"},"<")),i&&r.fromTo(i,{scale:1.4},{scale:1.1,duration:1,ease:"power2.out"},"<");let n=(e,t=0)=>{try{SplitText.create(e,{type:"lines",mask:"lines",autoSplit:!0,reduceWhiteSpace:!1,linesClass:"line",onSplit(i){let n=i.lines;n?.length&&(gsap.set(e,{visibility:"visible"}),gsap.set(n,{yPercent:110,rotationX:50,transformOrigin:"left top"}),r.to(n,{yPercent:0,rotationX:0,duration:1,ease:"expo.out",stagger:.08},t))}})}catch(i){console.error("Split error:",i)}},o=(e,t=0)=>{gsap.set(e,{visibility:"visible",opacity:0}),r.to(e,{opacity:1,duration:.6,ease:"power2.out"},t)};document.querySelectorAll("[data-split='load']").forEach(e=>{let t=parseFloat(e.dataset.delay)||0;n(e,t)}),document.querySelectorAll("[data-load='opacity']").forEach(e=>{let t=parseFloat(e.dataset.delay)||0;o(e,t)}),r.getChildren().length>0&&r.play(),document.querySelectorAll("a[href]").forEach(t=>{let i=t.getAttribute("href");!i||i.startsWith("http")||i.startsWith("#")||i.startsWith("mailto")||t.addEventListener("click",i=>{let r=t.href,n=new URL(r).pathname;"/"===n||"/index.html"===n||(i.preventDefault(),gsap.set(e,{autoAlpha:0}),gsap.to(e,{autoAlpha:1,duration:.7,ease:"power2.inOut",onComplete(){window.location.href=r}}))})})}function initDetails(){initDetailsStatsAnimation(),initDetailsTimelineAnimation(),initDetailsLinkIconInjection(),initDetailsLineInjection(),initDetailsLineAnimations(),initDetailsAccordion(),initDetailsDownloadCards(),initDetailsYouTubeThumbnails(),initDetailsHeroScroll(),initDetailSliders(),initEventiModal(),initEventiDateFilter()}function mobileRetryInit(e,t=2){let i=window.innerWidth<=991;if(!i){e();return}let r=0;!function i(){try{e()}catch(n){++r<t&&setTimeout(i,1e3)}}()}function initGlobal(){initLenisSmoothScroll(),initLineAnimations(),initResponsiveMenu(),initFooterYear(),initNavbarIconRotation(),initLocaleDropdownHide(),initPageTransitions(),mobileRetryInit(initMarqueeScrollDirection),mobileRetryInit(initSVGRadialReveal),mobileRetryInit(initTextSplitReveal),mobileRetryInit(initHeroImageScale),mobileRetryInit(initColorBlockReveal),setTimeout(()=>{window.lenis&&!sessionStorage.getItem("preloaderInitialized")&&window.lenis.start()},100)}function initHome(){initHomePreloader(),mobileRetryInit(initHomeStatsAnimation),mobileRetryInit(initHomeTextMaskAnimation),mobileRetryInit(initHomeTextScroll)}function initAbout(){mobileRetryInit(initAboutPrinciples)}initAbout(),initGlobal(),initHome(),initFilterPage(),initDetails();